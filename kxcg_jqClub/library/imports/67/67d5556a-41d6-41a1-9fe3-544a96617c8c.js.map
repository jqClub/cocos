{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["log","console","bind","cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","accLeft","accRight","xSpeed","setJumpAction","that","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","repeatForever","sequence","onLoad","jumpAction","node","runAction","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","event","keyCode","macroKey","macro","KEY","a","d","start","update","dt","width","game","background","Math","abs","symbol","x","onDestroy","off","hidePlayer","active"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar log = console.log.bind(console)\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    // 规定一个节点具有的全部属性，都需要写在properties里面\r\n    properties: {\r\n        // 主角跳跃高度\r\n        jumpHeight: 0,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0,\r\n        // 最大移动速度\r\n        maxMoveSpeed: 0,\r\n        // 加速度\r\n        accel: 0,\r\n// -------------------------\r\n        // 1.7新增配置参数\r\n        // 加速方向的开关\r\n        accLeft: false,\r\n        accRight: false,\r\n        // 水平方向的加速度\r\n        xSpeed: 0, \r\n    },\r\n\r\n    setJumpAction: function() {\r\n        var that = this\r\n         // 跳跃上升\r\n         var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n         // 下落\r\n         var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n         // 不断重复\r\n         return cc.repeatForever(cc.sequence(jumpUp, jumpDown));\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        var that = this\r\n         // 初始化跳跃动作\r\n         this.jumpAction = this.setJumpAction();\r\n         this.node.runAction(this.jumpAction);\r\n        // // 创建一个移动动作\r\n        // var actionTo = cc.scaleTo(2, 0.5);\r\n        // // 执行动作\r\n        // this.node.runAction(actionTo);\r\n        \r\n        // 让节点左右来回移动\r\n        // var seq = cc.sequence(cc.moveBy(0.5, 200, 0), cc.moveBy(0.5, -200, 0));\r\n        // 让节点上下来回移动\r\n        // var seq = cc.sequence(cc.moveBy(0.5, 200, 200), cc.moveBy(0.5, -200, -200));\r\n        // var lastSeq = cc.repeatForever(seq);\r\n\r\n        // // 不停旋转的封面图片\r\n        // var lastSeq = cc.repeatForever(cc.rotateBy(1.0, 360));\r\n        // that.node.runAction(lastSeq);\r\n\r\n        // 初始化键盘输入监听\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this); \r\n        \r\n        \r\n        // 使用枚举类型来注册，点击的事件\r\n        // that.node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n        //     console.log('Mouse down');\r\n        // }, this);\r\n\r\n        // 使用事件名来注册，点击的事件\r\n        // that.node.on('touchstart', function (event) {\r\n        //     console.log(event)\r\n        //     console.log('Mouse down', event.getLocation());\r\n        // }, this);\r\n    },\r\n    // 监听移动控制的事件\r\n    onKeyDown: function(event) {\r\n        // 键盘按下\r\n        var that = this\r\n        var keyCode = event.keyCode\r\n        var macroKey = cc.macro.KEY\r\n        if(keyCode == macroKey.a) {\r\n            this.accLeft = true\r\n        } else if(keyCode == macroKey.d) {\r\n            this.accRight = true\r\n        }\r\n        // log(11111, that.accLeft, this.accRight)\r\n    },\r\n    onKeyUp: function(event) {\r\n         // 键盘松开\r\n        var that = this\r\n        var keyCode = event.keyCode\r\n        var macroKey = cc.macro.KEY\r\n        if(keyCode == macroKey.a) {\r\n            this.accLeft = false\r\n        } else if(keyCode == macroKey.d) {\r\n            this.accRight = false\r\n        }\r\n        // log(11111, that.accLeft, this.accRight)\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    // 更新节点的坐标和速度，update在场景加载后，就会每帧调用一次，\r\n    // 一般把经常需要计算或更新的放在这里\r\n    update (dt) {\r\n        var that = this\r\n        if(that.accLeft) {\r\n            that.xSpeed -= that.accel * dt\r\n        } else if(that.accRight) {\r\n            that.xSpeed += that.accel * dt\r\n        }\r\n        // if(Math.abs(that.xSpeed) > that.maxMoveSpeed) {\r\n        //     // 乘以对应的符号，Math.abs是取绝对值\r\n        //     var symbol = that.xSpeed / Math.abs(that.xSpeed)\r\n        //     that.xSpeed = that.maxMoveSpeed * symbol\r\n        // }\r\n\r\n\r\n        var width = that.game.background.width\r\n        if(Math.abs(that.xSpeed) > width) {\r\n                    //     // 乘以对应的符号，Math.abs是取绝对值\r\n            var symbol = that.xSpeed / Math.abs(that.xSpeed)\r\n            that.xSpeed = width * symbol\r\n        }\r\n        this.node.x = that.xSpeed\r\n    },\r\n\r\n    // 在销毁的时候，不去监听键盘的事件\r\n    onDestroy() {\r\n        // 取消键盘输入监听\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    hidePlayer: function() {\r\n        var that = this\r\n        var active = that.node.active\r\n        that.node.active = !active\r\n    },\r\n});\r\n"]}